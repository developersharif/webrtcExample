(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const u=[{urls:"stun:stun.l.google.com:19302"}],t=new RTCPeerConnection({iceServers:u});let c,a;const m=document.getElementById("localVideo"),p=document.getElementById("remoteVideo"),g=document.getElementById("create_offer"),y=document.getElementById("create_answer"),w=document.getElementById("add_answer"),l=document.getElementById("sdp_offer"),f=document.getElementById("sdp_answer"),O={video:!0,audio:!1};S();async function S(){c=await navigator.mediaDevices.getUserMedia(O),a=new MediaStream,m.srcObject=c,p.srcObject=a,c.getTracks().forEach(n=>{t.addTrack(n,c)}),t.ontrack=n=>{n.streams[0].getTracks().forEach(r=>{a.addTrack(r)})}}async function D(){t.onicecandidate=r=>{console.log(r),r.candidate&&(l.value=JSON.stringify(t.localDescription))};const n=await t.createOffer();await t.setLocalDescription(n)}async function B(){const n=l.value,r=new RTCSessionDescription(JSON.parse(n));await t.setRemoteDescription(r);const s=await t.createAnswer();await t.setLocalDescription(s),f.value=JSON.stringify(t.localDescription)}async function E(){if(!t.currentRemoteDescription){const n=new RTCSessionDescription(JSON.parse(f.value));t.setRemoteDescription(n)}}g.onclick=D;y.onclick=B;w.onclick=E;
