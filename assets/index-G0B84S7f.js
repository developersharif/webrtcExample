(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const f={};async function m(){const t=await(await fetch("https://realbrain.metered.live/api/v1/turn/credentials?apiKey=ff29501ba025c8ffea1ec276bffc4f8dd96f")).json();f.iceServers=t}m();const r=new RTCPeerConnection(f);let c,a;const p=document.getElementById("localVideo"),y=document.getElementById("remoteVideo"),g=document.getElementById("create_offer"),w=document.getElementById("create_answer"),O=document.getElementById("add_answer"),l=document.getElementById("sdp_offer"),u=document.getElementById("sdp_answer"),S={video:!0,audio:!1};v();async function v(){c=await navigator.mediaDevices.getUserMedia(S),a=new MediaStream,p.srcObject=c,y.srcObject=a,c.getTracks().forEach(n=>{r.addTrack(n,c)}),r.ontrack=n=>{n.streams[0].getTracks().forEach(t=>{a.addTrack(t)})}}async function h(){r.onicecandidate=t=>{console.log(t),t.candidate&&(l.value=JSON.stringify(r.localDescription))};const n=await r.createOffer();await r.setLocalDescription(n)}async function D(){const n=l.value,t=new RTCSessionDescription(JSON.parse(n));await r.setRemoteDescription(t);const s=await r.createAnswer();await r.setLocalDescription(s),u.value=JSON.stringify(r.localDescription)}async function B(){if(!r.currentRemoteDescription){const n=new RTCSessionDescription(JSON.parse(u.value));r.setRemoteDescription(n)}}g.onclick=h;w.onclick=D;O.onclick=B;
